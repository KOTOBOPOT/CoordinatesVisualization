Feature: Фильтрация по дате и месяцу
  Как пользователь, я хочу фильтровать точки по временным периодам,
  чтобы анализировать данные за определённый промежуток времени.

  Scenario: Happy path — фильтрация по месяцу (YYYY-MM)
    Given я загрузил CSV с данными за разные месяцы:
      """
      lat,lon,timestamp
      55.75,37.62,2024-01-15
      59.9343,30.3351,2024-02-20
      60.0000,30.2500,2024-03-10
      """
    When я выбираю фильтр "По месяцу" и указываю "2024-02"
    And нажимаю "Применить фильтр"
    Then на карте отображается только 1 маркер
    And маркер соответствует точке с датой 2024-02-20
    And в легенде показано "Отфильтровано: 1 из 3 точек"

  Scenario: Happy path — фильтрация "начиная с даты"
    Given я загрузил CSV с данными за разные месяцы:
      """
      lat,lon,timestamp
      55.75,37.62,2024-01-15
      59.9343,30.3351,2024-02-20
      60.0000,30.2500,2024-03-10
      """
    When я выбираю фильтр "Начиная с даты" и указываю "2024-02-15"
    And нажимаю "Применить фильтр"
    Then на карте отображаются 2 маркера
    And маркеры соответствуют датам 2024-02-20 и 2024-03-10
    And в легенде показано "Отфильтровано: 2 из 3 точек"

  Scenario: Edge case — все точки отфильтровываются
    Given я загрузил CSV с данными за январь 2024
    When я выбираю фильтр "По месяцу" и указываю "2025-01"
    And нажимаю "Применить фильтр"
    Then на карте не отображаются маркеры
    And я вижу сообщение "Нет данных за выбранный период"
    And в легенде показано "Отфильтровано: 0 из N точек"

  Scenario: Edge case — некорректный формат даты
    Given я загрузил CSV с timestamp
    When я выбираю фильтр "По месяцу" и указываю "2024/02"
    Then я вижу сообщение об ошибке "Неверный формат даты. Используйте YYYY-MM"
    And фильтр не применяется

  Scenario: Сброс фильтра по дате
    Given я применил фильтр по месяцу "2024-02"
    When я нажимаю "Сбросить фильтр"
    Then на карте отображаются все загруженные точки
    And поле фильтра очищается

